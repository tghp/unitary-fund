---
import { getCollection, getEntry } from 'astro:content';

export interface Props {
  numberOfPosts?: number;
}

import BlogSlider from './BlogSlider';

const { numberOfPosts = 4 } = Astro.props;

const blogEntries = await getCollection('blog');

const sortedEntries = blogEntries.slice(0, numberOfPosts).sort((a, b) => {
  const dateA = new Date(
    `${a.data.publishYear}-${a.data.publishMonth}-${a.data.publishDay}`
  );
  const dateB = new Date(
    `${b.data.publishYear}-${b.data.publishMonth}-${b.data.publishDay}`
  );
  return Number(dateB) - Number(dateA);
});
---

<BlogSlider numberOfPosts={numberOfPosts} posts ={sortedEntries} client:only />
